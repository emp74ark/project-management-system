"use strict";(self.webpackChunkproject_management_system=self.webpackChunkproject_management_system||[]).push([[86],{7086:(te,w,_)=>{_.r(w),_.d(w,{UserModule:()=>Xt});var c=_(6895),s=_(433),p=_(4546),q=_(4466),u=_(3900),t=_(8256),P=_(1135),I=_(8505),d=_(2340),b=_(529);let x=(()=>{class n{constructor(e){this.http=e,this.listSubject=new P.X([]),this.listStream=this.listSubject.asObservable()}create(e){return this.http.post(`${d.N.base_url}/boards`,e)}delete(e){return this.http.delete(`${d.N.base_url}/boards/${e}`)}edit(e){return this.http.put(`${d.N.base_url}/boards/${e.id}`,{title:e.title,description:e.description})}getById(e){return this.http.get(`${d.N.base_url}/boards/${e}`)}getList(){return this.http.get(`${d.N.base_url}/boards`).pipe((0,I.b)(e=>this.listSubject.next(e)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(b.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var A=_(4004);let h=(()=>{class n{constructor(e){this.http=e}getUserById(e){return this.http.get(`${d.N.base_url}/users/${e}`)}getAll(){return this.http.get(`${d.N.base_url}/users`)}getByLogin(e){return this.http.get(`${d.N.base_url}/users`).pipe((0,A.U)(i=>i.filter(o=>o.login===e)[0]))}edit(e,i){return this.http.put(`${d.N.base_url}/users/${e}`,i)}delete(e){return this.http.delete(`${d.N.base_url}/users/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(b.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var g=_(2791),M=_(7579);let f=(()=>{class n{constructor(){this.displayModal$=new M.x}close(){this.displayModal$.next({show:!1,type:null,message:null,callback:null})}info(e){this.displayModal$.next({show:!0,type:"info",message:e,callback:null})}alert(e,i){this.displayModal$.next({show:!0,type:"alert",message:e,callback:i})}prompt(e,i){this.displayModal$.next({show:!0,type:"prompt",message:e,callback:i})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function O(n,r){if(1&n&&(t.TgZ(0,"div",3)(1,"h2"),t._uU(2),t.qZA()()),2&n){const e=t.oxw(2).ngIf;t.xp6(2),t.Oqu(e.message)}}function F(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"button",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).ngIf;return t.KtG(o.callback())}),t._uU(4),t.qZA()()}if(2&n){const e=t.oxw(2).ngIf,i=t.oxw();t.xp6(2),t.Oqu(e.message),t.xp6(2),t.Oqu(i.i18n.close)}}function N(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"button",5),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.close())}),t._uU(4),t.qZA(),t.TgZ(5,"button",6),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).ngIf,a=t.oxw();return t.KtG(o.callback(a.id))}),t._uU(6),t.qZA()()}if(2&n){const e=t.oxw(2).ngIf,i=t.oxw();t.xp6(2),t.Oqu(e.message),t.xp6(2),t.Oqu(i.i18n.cancel),t.xp6(2),t.Oqu(i.i18n.delete)}}function y(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"div",1),t.YNc(2,O,3,1,"div",2),t.YNc(3,F,5,2,"div",2),t.YNc(4,N,7,3,"div",2),t.qZA()),2&n){const e=t.oxw().ngIf;t.xp6(2),t.Q6J("ngIf","info"===e.type),t.xp6(1),t.Q6J("ngIf","alert"===e.type),t.xp6(1),t.Q6J("ngIf","prompt"===e.type)}}function U(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,y,5,3,"div",0),t.qZA()),2&n){const e=r.ngIf;t.xp6(1),t.Q6J("ngIf",e.show)}}let C=(()=>{class n{constructor(e,i){this.translate=e,this.modal=i,this.dic=["close","cancel","delete"],this.i18n=this.translate.get(this.dic),this.id=""}ngOnInit(){this.translate.locale.subscribe(e=>{this.i18n=this.translate.get(this.dic,e)})}close(){this.modal.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.s),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modal"]],inputs:{id:"id"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"modal__wrapper"],["class","modal__message",4,"ngIf"],[1,"modal__message"],[1,"btn",3,"click"],[1,"btn","btn-edit",3,"click"],[1,"btn","btn-delete",3,"click"]],template:function(e,i){1&e&&(t.YNc(0,U,2,1,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.modal.displayModal$))},dependencies:[c.O5,c.Ov],styles:["h1[_ngcontent-%COMP%]{font-size:3rem;color:#00abb3}h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#3c4048;text-align:center}h3[_ngcontent-%COMP%]{font-size:2rem;color:#b2b2b2;margin:.5rem}h4[_ngcontent-%COMP%]{font-size:2rem;color:#3c4048;margin:.5rem}.btn[_ngcontent-%COMP%]{margin:1rem;background:#00ABB3;border:0;border-radius:.3rem;padding:.5rem 1rem}.btn[_ngcontent-%COMP%]:disabled{background:#6a717e}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{background:#4a8d77}.btn-delete[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{background:#dd8582}.board__list_drop[_ngcontent-%COMP%]{border-width:.2rem}.drop-zone[_ngcontent-%COMP%]{height:.5rem;border-radius:.3rem;width:100%;background:#6a717e;font-size:3rem;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .3s ease}.drop-zone-active[_ngcontent-%COMP%]{height:10rem;background:#00ABB3;opacity:.8}.modal__wrapper[_ngcontent-%COMP%]{position:fixed;inset:0;background:#3C4048;opacity:.5}.modal__message[_ngcontent-%COMP%]{position:fixed;width:20rem;background:#EAEAEA;left:50%;top:50%;transform:translate(-50%,-50%);margin:auto;padding:1rem 2rem;border-radius:.3rem;display:flex;flex-direction:column;justify-content:center;align-items:center}"]}),n})();function J(n,r){if(1&n&&(t.TgZ(0,"small",10),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" ",e.i18n.title," ",e.i18n.required," ")}}function S(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw();return t.KtG(a.edit(o.id))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.i18n.edit," ")}}function E(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.MAs(3),l=t.MAs(6),m=t.oxw();return t.KtG(m.save(o.id,a.innerText,l.innerText))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.i18n.save," ")}}function L(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"h3",13,14),t._uU(4),t.qZA()(),t.TgZ(5,"div",15,16),t._uU(7),t.qZA(),t.TgZ(8,"div",17)(9,"button",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.open(a.id))}),t._uU(10),t.qZA(),t.YNc(11,S,2,1,"button",19),t.YNc(12,E,2,1,"button",20),t.TgZ(13,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deletePrompt())}),t._uU(14),t.qZA()(),t._UZ(15,"app-modal",22),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Q6J("contentEditable",i.checkEditableStatus(e.id)),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("contentEditable",i.checkEditableStatus(e.id)),t.xp6(2),t.hij(" ",e.description," "),t.xp6(3),t.hij(" ",i.i18n.open," "),t.xp6(1),t.Q6J("ngIf",!i.checkEditableStatus(e.id)),t.xp6(1),t.Q6J("ngIf",i.checkEditableStatus(e.id)),t.xp6(2),t.hij(" ",i.i18n.delete," "),t.xp6(1),t.Q6J("id",e.id)}}let Y=(()=>{class n{constructor(e,i,o,a,l,m){this.fb=e,this.router=i,this.boardService=o,this.userService=a,this.translate=l,this.modal=m,this.boardEditable={},this.dic=["dashboard_title","dashboard_new","title","description","create","open","close","edit","save","delete","cancel","required","modal_delete"],this.i18n=this.translate.get(this.dic),this.delete=Wt=>{this.boardService.delete(Wt).pipe((0,u.w)(()=>this.boardService.getList())).subscribe(()=>this.modal.close())}}ngOnInit(){this._createForm(),this.boardService.getList().subscribe(),this.boardList$=this.boardService.listStream,this.userService.getByLogin(localStorage.getItem("login")).subscribe(e=>{localStorage.setItem("userId",e.id)}),this.translate.locale.subscribe(e=>{this.i18n=this.translate.get(this.dic,e)})}_createForm(){this.DashboardForm=this.fb.group({title:[null,[s.kI.required]],description:[null]})}create(){this.DashboardForm.invalid||this.boardService.create({title:this.DashboardForm.value.title,description:this.DashboardForm.value.description}).pipe((0,u.w)(()=>this.boardService.getList())).subscribe(()=>{this.DashboardForm.reset()})}open(e){this.router.navigate(["/user/board",e])}deletePrompt(){this.modal.prompt(this.i18n.modal_delete,this.delete)}checkEditableStatus(e){return void 0!==this.boardEditable[e]&&this.boardEditable[e]}edit(e){this.boardEditable={...this.boardEditable,[e]:!0}}save(e,i,o){const a={id:e,title:i,description:o};this.boardEditable={...this.boardEditable,[e]:!1},this.boardService.edit(a).pipe((0,u.w)(()=>this.boardService.getList())).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(p.F0),t.Y36(x),t.Y36(h),t.Y36(g.s),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-page"]],decls:19,vars:13,consts:[[3,"formGroup","ngSubmit"],[1,"form-control"],["for","dashboard__new"],["type","text","id","dashboard__new-title","formControlName","title",3,"placeholder"],["class","danger",4,"ngIf"],["for","dashboard__new-description"],["type","text","id","dashboard__new-description","formControlName","description",3,"placeholder"],["type","submit",1,"btn","btn-create",3,"disabled"],[1,"dashboard"],["class","dashboard__item",4,"ngFor","ngForOf"],[1,"danger"],[1,"dashboard__item"],[1,"project__title"],[3,"contentEditable"],["title",""],[1,"project__description",3,"contentEditable"],["description",""],[1,"buttons"],[1,"btn",3,"click"],["class","btn btn-edit",3,"click",4,"ngIf"],["class","btn btn-save",3,"click",4,"ngIf"],[1,"btn","btn-delete",3,"click"],[3,"id"],[1,"btn","btn-edit",3,"click"],[1,"btn","btn-save",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA(),t.TgZ(2,"form",0),t.NdJ("ngSubmit",function(){return i.create()}),t.TgZ(3,"div",1)(4,"h3"),t._uU(5),t.qZA(),t.TgZ(6,"label",2),t._uU(7),t.qZA(),t._UZ(8,"input",3),t.YNc(9,J,2,2,"small",4),t.qZA(),t.TgZ(10,"div",1)(11,"label",5),t._uU(12),t.qZA(),t._UZ(13,"input",6),t.qZA(),t.TgZ(14,"button",7),t._uU(15),t.qZA()(),t.TgZ(16,"div",8),t.YNc(17,L,16,9,"div",9),t.ALo(18,"async"),t.qZA()),2&e){let o;t.xp6(1),t.Oqu(i.i18n.dashboard_title),t.xp6(1),t.Q6J("formGroup",i.DashboardForm),t.xp6(3),t.Oqu(i.i18n.dashboard_new),t.xp6(2),t.hij(" ",i.i18n.title," "),t.xp6(1),t.s9C("placeholder",i.i18n.dashboard_new),t.xp6(1),t.Q6J("ngIf",(null==(o=i.DashboardForm.get("title"))?null:o.touched)&&(null==(o=i.DashboardForm.get("title"))||null==o.errors?null:o.errors.required)),t.xp6(3),t.hij(" ",i.i18n.description," "),t.xp6(1),t.s9C("placeholder",i.i18n.description),t.xp6(1),t.Q6J("disabled",i.DashboardForm.invalid),t.xp6(1),t.Oqu(i.i18n.create),t.xp6(2),t.Q6J("ngForOf",t.lcZ(18,11,i.boardList$))}},dependencies:[c.sg,c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,C,c.Ov],styles:["h1[_ngcontent-%COMP%]{font-size:3rem;color:#00abb3}h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#3c4048;text-align:center}h3[_ngcontent-%COMP%]{font-size:2rem;color:#b2b2b2;margin:.5rem}h4[_ngcontent-%COMP%]{font-size:2rem;color:#3c4048;margin:.5rem}.btn[_ngcontent-%COMP%]{margin:1rem;background:#00ABB3;border:0;border-radius:.3rem;padding:.5rem 1rem}.btn[_ngcontent-%COMP%]:disabled{background:#6a717e}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{background:#4a8d77}.btn-delete[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{background:#dd8582}.board__list_drop[_ngcontent-%COMP%]{border-width:.2rem}.drop-zone[_ngcontent-%COMP%]{height:.5rem;border-radius:.3rem;width:100%;background:#6a717e;font-size:3rem;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .3s ease}.drop-zone-active[_ngcontent-%COMP%]{height:10rem;background:#00ABB3;opacity:.8}form[_ngcontent-%COMP%]{margin:auto;width:30rem;display:flex;flex-direction:column;align-items:center}form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.form-control[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;margin:1rem 0}.dashboard[_ngcontent-%COMP%]{margin:auto;display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;width:-moz-fit-content;width:fit-content}.dashboard__item[_ngcontent-%COMP%]{margin:auto;border:.1rem dashed #3C4048;border-radius:.3rem;width:30rem;padding:1rem;font-size:1.6rem}.project__title[_ngcontent-%COMP%]{background:#3C4048;padding:.5rem;border-radius:.3rem;margin-bottom:1rem;text-align:center}.project__description[_ngcontent-%COMP%]{text-align:center}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),n})();var T=_(629);function B(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE(" ",e.i18n.email," ",e.i18n.required," ")}}function Q(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.i18n.correct_email," ")}}function $(n,r){if(1&n&&(t.TgZ(0,"div",15),t.YNc(1,B,2,2,"small",14),t.YNc(2,Q,2,1,"small",14),t.qZA()),2&n){const e=t.oxw(2);let i,o;t.xp6(1),t.Q6J("ngIf",null==(i=e.LogInForm.get("loginEmail"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.LogInForm.get("loginEmail"))||null==o.errors?null:o.errors.email)}}function j(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE(" ",e.i18n.password," ",e.i18n.required," ")}}function z(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.i18n.correct_password," ")}}function G(n,r){if(1&n&&(t.TgZ(0,"div",15),t.YNc(1,j,2,2,"small",14),t.YNc(2,z,2,1,"small",14),t.qZA()),2&n){const e=t.oxw(2);let i,o;t.xp6(1),t.Q6J("ngIf",null==(i=e.LogInForm.get("loginPassword"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.LogInForm.get("loginPassword"))||null==o.errors?null:o.errors.minlength)}}function D(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=r.ngIf;t.xp6(1),t.Oqu(e)}}function H(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"form",5),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.loginSubmit())}),t.TgZ(2,"div",6)(3,"label",7,8),t._uU(5),t.qZA(),t._UZ(6,"input",9),t.YNc(7,$,3,2,"div",10),t.qZA(),t.TgZ(8,"div",6)(9,"label",11),t._uU(10),t.qZA(),t._UZ(11,"input",12),t.YNc(12,G,3,2,"div",10),t.qZA(),t.TgZ(13,"button",13),t._uU(14),t.qZA(),t.TgZ(15,"div",6),t.YNc(16,D,2,1,"small",14),t.ALo(17,"async"),t.qZA()(),t._UZ(18,"app-modal"),t.qZA()}if(2&n){const e=t.oxw();let i,o;t.xp6(1),t.Q6J("formGroup",e.LogInForm),t.xp6(4),t.Oqu(e.i18n.email),t.xp6(1),t.s9C("placeholder",e.i18n.email),t.xp6(1),t.Q6J("ngIf",(null==(i=e.LogInForm.get("loginEmail"))?null:i.touched)&&(null==(i=e.LogInForm.get("loginEmail"))?null:i.invalid)),t.xp6(3),t.Oqu(e.i18n.password),t.xp6(1),t.s9C("placeholder",e.i18n.password),t.xp6(1),t.Q6J("ngIf",(null==(o=e.LogInForm.get("loginPassword"))?null:o.touched)&&(null==(o=e.LogInForm.get("loginPassword"))?null:o.invalid)),t.xp6(1),t.Q6J("disabled",e.LogInForm.invalid),t.xp6(1),t.Oqu(e.i18n.login),t.xp6(2),t.Q6J("ngIf",t.lcZ(17,10,e.auth.authErrorMessage$))}}function K(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE(" ",e.i18n.name,"",e.i18n.required," ")}}function V(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE(" ",e.i18n.name," ",e.i18n.short," ")}}function R(n,r){if(1&n&&(t.TgZ(0,"div",15),t.YNc(1,K,2,2,"small",14),t.YNc(2,V,2,2,"small",14),t.qZA()),2&n){const e=t.oxw(2);let i,o;t.xp6(1),t.Q6J("ngIf",null==(i=e.SignUpForm.get("signupName"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.SignUpForm.get("signupName"))||null==o.errors?null:o.errors.minlength)}}function X(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE(" ",e.i18n.email," ",e.i18n.required," ")}}function W(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.i18n.correct_email," ")}}function tt(n,r){if(1&n&&(t.TgZ(0,"div",15),t.YNc(1,X,2,2,"small",14),t.YNc(2,W,2,1,"small",14),t.qZA()),2&n){const e=t.oxw(2);let i,o;t.xp6(1),t.Q6J("ngIf",null==(i=e.SignUpForm.get("signupEmail"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.SignUpForm.get("signupEmail"))||null==o.errors?null:o.errors.email)}}function et(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE(" ",e.i18n.password," ",e.i18n.required," ")}}function nt(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.i18n.correct_password," ")}}function it(n,r){if(1&n&&(t.TgZ(0,"div",15),t.YNc(1,et,2,2,"small",14),t.YNc(2,nt,2,1,"small",14),t.qZA()),2&n){const e=t.oxw(2);let i,o;t.xp6(1),t.Q6J("ngIf",null==(i=e.SignUpForm.get("signupPassword"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.SignUpForm.get("signupPassword"))||null==o.errors?null:o.errors.minlength)}}function ot(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=r.ngIf;t.xp6(1),t.hij(" ",e," ")}}function rt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"form",5),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.signUpSubmit())}),t.TgZ(2,"div",6)(3,"label",18),t._uU(4),t.qZA(),t._UZ(5,"input",19),t.YNc(6,R,3,2,"div",10),t.qZA(),t.TgZ(7,"div",6)(8,"label",20),t._uU(9),t.qZA(),t._UZ(10,"input",21),t.YNc(11,tt,3,2,"div",10),t.qZA(),t.TgZ(12,"div",6)(13,"label",22),t._uU(14),t.qZA(),t._UZ(15,"input",23),t.YNc(16,it,3,2,"div",10),t.qZA(),t.TgZ(17,"button",13),t._uU(18),t.qZA(),t.TgZ(19,"div",6),t.YNc(20,ot,2,1,"small",14),t.ALo(21,"async"),t.qZA()(),t._UZ(22,"app-modal"),t.qZA()}if(2&n){const e=t.oxw();let i,o,a;t.xp6(1),t.Q6J("formGroup",e.SignUpForm),t.xp6(3),t.hij(" ",e.i18n.name," "),t.xp6(1),t.s9C("placeholder",e.i18n.name),t.xp6(1),t.Q6J("ngIf",(null==(i=e.SignUpForm.get("signupName"))?null:i.touched)&&(null==(i=e.SignUpForm.get("signupName"))?null:i.invalid)),t.xp6(3),t.hij(" ",e.i18n.email," "),t.xp6(1),t.s9C("placeholder",e.i18n.email),t.xp6(1),t.Q6J("ngIf",(null==(o=e.SignUpForm.get("signupEmail"))?null:o.touched)&&(null==(o=e.SignUpForm.get("signupEmail"))?null:o.invalid)),t.xp6(3),t.hij(" ",e.i18n.password," "),t.xp6(1),t.s9C("placeholder",e.i18n.password),t.xp6(1),t.Q6J("ngIf",(null==(a=e.SignUpForm.get("signupPassword"))?null:a.touched)&&(null==(a=e.SignUpForm.get("signupPassword"))?null:a.invalid)),t.xp6(1),t.Q6J("disabled",e.SignUpForm.invalid),t.xp6(1),t.hij("",e.i18n.signup," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(21,13,e.auth.authErrorMessage$))}}const st=function(n,r){return{auth__mode_active:n,auth__mode_unactive:r,auth__left:!0}},at=function(n,r){return{auth__mode_active:n,auth__mode_unactive:r,auth__right:!0}};let lt=(()=>{class n{constructor(e,i,o,a,l){this.fb=e,this.auth=i,this.router=o,this.translate=a,this.modal=l,this.dic=["email","name","password","login","signup","required","short","correct_email","correct_password","close","modal_registration","modal_loading"],this.i18n=this.translate.get(this.dic),this.successRegistration=()=>{console.log("callback works"),this.authMode=!0,this.router.navigate(["/user","login"])},this._createLoginForm(),this._createSignUpForm(),this.authMode=!0}ngOnInit(){this.translate.locale.subscribe(e=>{this.i18n=this.translate.get(this.dic,e)})}_createLoginForm(){this.LogInForm=this.fb.group({loginEmail:[null,[s.kI.required,s.kI.email]],loginPassword:[null,[s.kI.required,s.kI.minLength(6)]]})}_createSignUpForm(){this.SignUpForm=this.fb.group({signupName:[null,[s.kI.required,s.kI.minLength(2)]],signupEmail:[null,[s.kI.required,s.kI.email]],signupPassword:[null,[s.kI.required,s.kI.minLength(6)]]})}authModeToggle(){this.authMode=!this.authMode}loginSubmit(){this.LogInForm.invalid||(this.modal.info(this.i18n.modal_loading),this.auth.login({login:this.LogInForm.value.loginEmail,password:this.LogInForm.value.loginPassword}).subscribe(()=>{this.modal.close(),this.router.navigate(["/user","dashboard"])},()=>{this.modal.close(),this.router.navigate(["/user","login"])}))}signUpSubmit(){this.SignUpForm.invalid||this.auth.signup({name:this.SignUpForm.value.signupName,login:this.SignUpForm.value.signupEmail,password:this.SignUpForm.value.signupPassword}).subscribe(()=>{this.modal.alert(this.i18n.modal_registration,this.successRegistration)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(T.e),t.Y36(p.F0),t.Y36(g.s),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login-page"]],decls:7,vars:12,consts:[[1,"auth__mode"],[3,"ngClass","click"],["class","login",4,"ngIf"],["class","signup",4,"ngIf"],[1,"login"],[3,"formGroup","ngSubmit"],[1,"form-control"],["for","login__email"],["email",""],["type","email","id","login__email","formControlName","loginEmail",3,"placeholder"],["class","validation",4,"ngIf"],["for","login__password"],["type","password","id","login__password","formControlName","loginPassword",3,"placeholder"],["type","submit",1,"btn",3,"disabled"],["class","danger",4,"ngIf"],[1,"validation"],[1,"danger"],[1,"signup"],["for","signup__name"],["type","text","id","signup__name","formControlName","signupName",3,"placeholder"],["for","signup__email"],["type","email","id","signup__email","formControlName","signupEmail",3,"placeholder"],["for","signup__password"],["type","password","id","signup__password","formControlName","signupPassword",3,"placeholder"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h2",1),t.NdJ("click",function(){return i.authModeToggle()}),t._uU(2),t.qZA(),t.TgZ(3,"h2",1),t.NdJ("click",function(){return i.authModeToggle()}),t._uU(4),t.qZA()(),t.YNc(5,H,19,12,"div",2),t.YNc(6,rt,23,15,"div",3)),2&e&&(t.xp6(1),t.Q6J("ngClass",t.WLB(6,st,i.authMode,!i.authMode)),t.xp6(1),t.hij(" ",i.i18n.login," "),t.xp6(1),t.Q6J("ngClass",t.WLB(9,at,!i.authMode,i.authMode)),t.xp6(1),t.hij(" ",i.i18n.signup," "),t.xp6(1),t.Q6J("ngIf",i.authMode),t.xp6(1),t.Q6J("ngIf",!i.authMode))},dependencies:[c.mk,c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,C,c.Ov],styles:["h1[_ngcontent-%COMP%]{font-size:3rem;color:#00abb3}h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#3c4048;text-align:center}h3[_ngcontent-%COMP%]{font-size:2rem;color:#b2b2b2;margin:.5rem}h4[_ngcontent-%COMP%]{font-size:2rem;color:#3c4048;margin:.5rem}.btn[_ngcontent-%COMP%]{margin:1rem;background:#00ABB3;border:0;border-radius:.3rem;padding:.5rem 1rem}.btn[_ngcontent-%COMP%]:disabled{background:#6a717e}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{background:#4a8d77}.btn-delete[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{background:#dd8582}.board__list_drop[_ngcontent-%COMP%]{border-width:.2rem}.drop-zone[_ngcontent-%COMP%]{height:.5rem;border-radius:.3rem;width:100%;background:#6a717e;font-size:3rem;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .3s ease}.drop-zone-active[_ngcontent-%COMP%]{height:10rem;background:#00ABB3;opacity:.8}.auth__mode[_ngcontent-%COMP%]{margin:auto;width:30rem;display:flex;justify-content:space-between}.auth__mode_active[_ngcontent-%COMP%]{color:#3c4048;background:#00ABB3;width:50%}.auth__mode_unactive[_ngcontent-%COMP%]{color:#b2b2b2;background:#6a717e;width:50%}.auth__left[_ngcontent-%COMP%]{border-radius:.3rem 0 0 .3rem}.auth__right[_ngcontent-%COMP%]{border-radius:0 .3rem .3rem 0}form[_ngcontent-%COMP%]{margin:auto;width:30rem;display:flex;flex-direction:column;align-items:center}.form-control[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;margin:1rem 0}"]}),n})(),v=(()=>{class n{constructor(e){this.http=e,this.listSubject=new P.X([]),this.listStream=this.listSubject.asObservable()}create(e,i){return this.http.post(`${d.N.base_url}/boards/${e}/columns`,i).pipe((0,A.U)(o=>({...i,id:o.id})))}delete(e,i){return this.http.delete(`${d.N.base_url}/boards/${e}/columns/${i}`)}edit(e,i){return this.http.put(`${d.N.base_url}/boards/${e}/columns/${i.id}`,{title:i.title,order:i.order})}getById(e,i){return this.http.delete(`${d.N.base_url}/boards/${e}/${i}`)}getAll(e){return this.http.get(`${d.N.base_url}/boards/${e}/columns`).pipe((0,I.b)(i=>this.listSubject.next(i)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(b.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Z=(()=>{class n{constructor(e){this.http=e}create(e,i){return this.http.post(`${d.N.base_url}/boards/${e}/columns/${i.columnId}/tasks`,{title:i.title,description:i.description,userId:i.userId})}delete(e,i){return this.http.delete(`${d.N.base_url}/boards/${e}/columns/${i.columnId}/tasks/${i.id}`)}edit(e,i){return this.http.put(`${d.N.base_url}/boards/${e}/columns/${i.columnId}/tasks/${i.id}`,{order:i.order,title:i.title,description:i.description,userId:i.userId,boardId:e,columnId:i.columnId})}getById(e,i){return this.http.delete(`${d.N.base_url}/boards/${e}/columns/${i.columnId}/tasks/${i.id}`)}getAll(e,i){return this.http.get(`${d.N.base_url}/boards/${e}/columns/${i}/tasks`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(b.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();function ct(n,r){if(1&n&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&n){const e=r.ngIf;t.xp6(1),t.Oqu(e.login)}}function dt(n,r){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,ct,2,1,"small",13),t.ALo(2,"async"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.user$))}}function _t(n,r){if(1&n&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.login," ")}}function ut(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"select",14),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.userSelect=o)}),t.TgZ(2,"option",15),t._uU(3),t.qZA(),t.YNc(4,_t,2,2,"option",16),t.ALo(5,"async"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.userSelect),t.xp6(2),t.hij(" ",e.i18n.user_select," "),t.xp6(1),t.Q6J("ngForOf",t.lcZ(5,3,e.users$))}}function pt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.edit())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.i18n.edit," ")}}function mt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),a=t.MAs(2),l=t.MAs(5);return t.KtG(o.save(o.task.id,o.task.order,a.innerText,l.innerText,o.userSelect))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij("",e.i18n.save," ")}}const gt=function(n){return{order:n}};let bt=(()=>{class n{constructor(e,i,o,a,l){this.listService=e,this.taskService=i,this.userService=o,this.activeRoute=a,this.translate=l,this.taskEditable=!1,this.userSelect="none",this.dic=["edit","save","delete","user_select"],this.i18n=this.translate.get(this.dic)}ngOnInit(){this.users$=this.userService.getAll(),this.activeRoute.params.subscribe(e=>{this.boardId=e.id}),this.user$=this.userService.getUserById(this.task.userId),this.translate.locale.subscribe(e=>{this.i18n=this.translate.get(this.dic,e)})}delete(){this.taskService.delete(this.boardId,this.task).pipe((0,u.w)(()=>this.listService.getAll(this.boardId))).subscribe()}edit(){this.taskEditable=!0}save(e,i,o,a,l){const m={id:e,order:i,title:o,description:a,userId:l,columnId:this.task.columnId};this.taskEditable=!1,this.taskService.edit(this.boardId,m).pipe((0,u.w)(()=>this.taskService.getAll(this.boardId,m.columnId)),(0,u.w)(()=>this.user$=this.userService.getUserById(this.userSelect))).subscribe()}taskDragStartHandler(e){e.dataTransfer.setData("text",JSON.stringify(this.task)),e.target.classList.add("task__container_drag")}taskDragEndHandler(e){e.dataTransfer?.clearData()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v),t.Y36(Z),t.Y36(h),t.Y36(p.gz),t.Y36(g.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-board-tasks"]],inputs:{task:"task"},decls:17,vars:13,consts:[["draggable","true",1,"task__container",3,"ngStyle","dragstart","dragend"],[1,"task__title",3,"contentEditable"],["title",""],[1,"task__description"],["description",""],[3,"contentEditable"],["class","task__author",4,"ngIf"],[1,"buttons"],["class","btn btn-edit",3,"click",4,"ngIf"],["class","btn btn-save",3,"click",4,"ngIf"],[1,"btn","btn-delete",3,"click"],[1,"drop-zone"],[1,"task__author"],[4,"ngIf"],["name","task__author","id","task__author",3,"ngModel","ngModelChange"],["value","none","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"btn","btn-edit",3,"click"],[1,"btn","btn-save",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.NdJ("dragstart",function(a){return i.taskDragStartHandler(a)})("dragend",function(a){return i.taskDragEndHandler(a)}),t.TgZ(1,"div",1,2),t._uU(3),t.qZA(),t.TgZ(4,"div",3,4)(6,"p",5),t._uU(7),t.qZA()(),t.YNc(8,dt,3,3,"div",6),t.YNc(9,ut,6,5,"div",6),t.TgZ(10,"div",7),t.YNc(11,pt,2,1,"button",8),t.YNc(12,mt,2,1,"button",9),t.TgZ(13,"button",10),t.NdJ("click",function(){return i.delete()}),t._uU(14),t.qZA()()(),t.TgZ(15,"div",11),t._uU(16,"+"),t.qZA()),2&e&&(t.Q6J("ngStyle",t.VKq(11,gt,i.task.order)),t.xp6(1),t.Q6J("contentEditable",i.taskEditable),t.xp6(2),t.Oqu(i.task.title),t.xp6(3),t.Q6J("contentEditable",i.taskEditable),t.xp6(1),t.Oqu(i.task.description),t.xp6(1),t.Q6J("ngIf",!i.taskEditable),t.xp6(1),t.Q6J("ngIf",i.taskEditable),t.xp6(2),t.Q6J("ngIf",!i.taskEditable),t.xp6(1),t.Q6J("ngIf",i.taskEditable),t.xp6(2),t.Oqu(i.i18n.delete),t.xp6(1),t.uIk("data-order",i.task.order))},dependencies:[c.sg,c.O5,c.PC,s.YN,s.Kr,s.EJ,s.JJ,s.On,c.Ov],styles:["h1[_ngcontent-%COMP%]{font-size:3rem;color:#00abb3}h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#3c4048;text-align:center}h3[_ngcontent-%COMP%]{font-size:2rem;color:#b2b2b2;margin:.5rem}h4[_ngcontent-%COMP%]{font-size:2rem;color:#3c4048;margin:.5rem}.btn[_ngcontent-%COMP%]{margin:1rem;background:#00ABB3;border:0;border-radius:.3rem;padding:.5rem 1rem}.btn[_ngcontent-%COMP%]:disabled{background:#6a717e}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{background:#4a8d77}.btn-delete[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{background:#dd8582}.board__list_drop[_ngcontent-%COMP%]{border-width:.2rem}.drop-zone[_ngcontent-%COMP%]{height:.5rem;border-radius:.3rem;width:100%;background:#6a717e;font-size:3rem;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .3s ease}.drop-zone-active[_ngcontent-%COMP%]{height:10rem;background:#00ABB3;opacity:.8}.task__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:.5rem;padding:.5rem;border-radius:.3rem;box-shadow:.1rem .1rem .3rem #3c4048}.task__container_drag[_ngcontent-%COMP%]{border:.2rem dashed #a17117;border-radius:.3rem}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column}.task__title[_ngcontent-%COMP%]{font-size:2rem;color:#b2b2b2;text-align:center;background:#3C4048;padding:.5rem;border-radius:.3rem;margin-bottom:1rem}.task__description[_ngcontent-%COMP%]{text-align:center}.task__author[_ngcontent-%COMP%]{text-align:center;font-size:1.3rem}"]}),n})();function ht(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.editList())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.i18n.edit)}}function ft(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),a=t.MAs(2);return t.KtG(o.saveList(a.innerText,o.list.order))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.i18n.save)}}function vt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.createFormOpen())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij("",e.i18n.task_new," ")}}function xt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.createFormClose())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.i18n.cancel)}}function Ct(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"form",15),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.create())}),t.TgZ(1,"div",16)(2,"label",17),t._uU(3),t.qZA(),t._UZ(4,"input",18),t.qZA(),t.TgZ(5,"div",16)(6,"label",19),t._uU(7),t.qZA(),t._UZ(8,"input",20),t.qZA(),t.TgZ(9,"button",21),t._uU(10),t.qZA(),t.YNc(11,xt,2,1,"button",22),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.TaskForm),t.xp6(3),t.Oqu(e.i18n.title),t.xp6(1),t.s9C("placeholder",e.i18n.title),t.xp6(3),t.Oqu(e.i18n.description),t.xp6(1),t.s9C("placeholder",e.i18n.description),t.xp6(1),t.Q6J("disabled",e.TaskForm.invalid),t.xp6(1),t.Oqu(e.i18n.save),t.xp6(1),t.Q6J("ngIf",e.createFormVisibility)}}function Tt(n,r){1&n&&t._UZ(0,"app-board-tasks",24),2&n&&t.Q6J("task",r.$implicit)}let Zt=(()=>{class n{constructor(e,i,o,a,l){this.fb=e,this.activeRoute=i,this.listService=o,this.taskService=a,this.translate=l,this.listEditable=!1,this.createFormVisibility=!1,this.dic=["task_new","title","description","edit","create","save","delete","cancel"],this.i18n=this.translate.get(this.dic)}ngOnInit(){this._createForm(),this.activeRoute.params.subscribe(e=>{this.boardId=e.id}),this.taskService.getAll(this.boardId,this.list.id).subscribe(),this.tasks$=this.taskService.getAll(this.boardId,this.list.id),this.translate.locale.subscribe(e=>{this.i18n=this.translate.get(this.dic,e)})}_createForm(){this.TaskForm=this.fb.group({title:[null,[s.kI.required]],description:[null,[s.kI.required]]})}createFormOpen(){this.createFormVisibility=!0}createFormClose(){this.createFormVisibility=!1,this.TaskForm.reset()}create(){if(this.createFormVisibility=!1,this.TaskForm.invalid)return;const e={title:this.TaskForm.value.title,description:this.TaskForm.value.description,userId:localStorage.getItem("userId"),boardId:this.boardId,columnId:this.list.id};this.taskService.create(this.boardId,e).pipe((0,u.w)(()=>this.tasks$=this.taskService.getAll(this.boardId,this.list.id))).subscribe(()=>{this.TaskForm.reset()})}deleteList(){this.listService.delete(this.boardId,this.list.id).pipe((0,u.w)(()=>this.listService.getAll(this.boardId))).subscribe()}editList(){this.listEditable=!0}saveList(e,i){this.listService.edit(this.boardId,{id:this.list.id,order:i,title:e}).pipe((0,u.w)(()=>this.listService.getAll(this.boardId))).subscribe(),this.listEditable=!1}taskDragOverHandler(e){e.preventDefault(),e.currentTarget.classList.add("board__list_drop")}taskDragEnterHandler(e){const i=e.target;i.dataset.order&&i.classList.add("drop-zone-active")}taskDragLeaveHandler(e){e.currentTarget.classList.remove("board__list_drop");const o=e.target;o.dataset.order&&o.classList.remove("drop-zone-active")}taskDropHandler(e){e.preventDefault();const i=JSON.parse(e.dataTransfer.getData("text")),o=e.currentTarget,a=e.target;a.classList.remove("task__container_drag");const l={...i,columnId:o.id,order:Number(a.dataset.order)+1};this.taskService.delete(this.boardId,i).subscribe(),this.taskService.create(this.boardId,l).pipe((0,u.w)(()=>this.listService.getAll(this.boardId))).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(p.gz),t.Y36(v),t.Y36(Z),t.Y36(g.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-board-list"]],inputs:{list:"list"},decls:16,vars:12,consts:[[1,"board__list",3,"id","dragover","drop","dragenter","dragleave"],[1,"board__list-title",3,"contentEditable"],["title",""],[1,"buttons"],["class","btn btn-edit",3,"click",4,"ngIf"],["class","btn btn-save",3,"click",4,"ngIf"],[1,"btn","btn-delete",3,"click"],["class","btn btn-create",3,"click",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"board__list-items"],[1,"drop-zone"],[3,"task",4,"ngFor","ngForOf"],[1,"btn","btn-edit",3,"click"],[1,"btn","btn-save",3,"click"],[1,"btn","btn-create",3,"click"],[3,"formGroup","ngSubmit"],[1,"form-control"],["for","task__name"],["type","text","id","task__name","formControlName","title",3,"placeholder"],["for","task__description"],["type","text","id","task__description","formControlName","description",3,"placeholder"],["type","submit",1,"btn","btn-save",3,"disabled"],["class","btn btn-cancel",3,"click",4,"ngIf"],[1,"btn","btn-cancel",3,"click"],[3,"task"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.NdJ("dragover",function(a){return i.taskDragOverHandler(a)})("drop",function(a){return i.taskDropHandler(a)})("dragenter",function(a){return i.taskDragEnterHandler(a)})("dragleave",function(a){return i.taskDragLeaveHandler(a)}),t.TgZ(1,"div",1,2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,ht,2,1,"button",4),t.YNc(6,ft,2,1,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.deleteList()}),t._uU(8),t.qZA(),t.YNc(9,vt,2,1,"button",7),t.qZA(),t.YNc(10,Ct,12,8,"form",8),t.TgZ(11,"div",9)(12,"div",10),t._uU(13,"+"),t.qZA(),t.YNc(14,Tt,1,1,"app-board-tasks",11),t.ALo(15,"async"),t.qZA()()),2&e&&(t.s9C("id",i.list.id),t.xp6(1),t.Q6J("contentEditable",i.listEditable),t.xp6(2),t.Oqu(i.list.title),t.xp6(2),t.Q6J("ngIf",!i.listEditable),t.xp6(1),t.Q6J("ngIf",i.listEditable),t.xp6(2),t.Oqu(i.i18n.delete),t.xp6(1),t.Q6J("ngIf",!i.createFormVisibility),t.xp6(1),t.Q6J("ngIf",i.createFormVisibility),t.xp6(2),t.uIk("data-order",0),t.xp6(2),t.Q6J("ngForOf",t.lcZ(15,10,i.tasks$)))},dependencies:[c.sg,c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,bt,c.Ov],styles:["h1[_ngcontent-%COMP%]{font-size:3rem;color:#00abb3}h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#3c4048;text-align:center}h3[_ngcontent-%COMP%]{font-size:2rem;color:#b2b2b2;margin:.5rem}h4[_ngcontent-%COMP%]{font-size:2rem;color:#3c4048;margin:.5rem}.btn[_ngcontent-%COMP%]{margin:1rem;background:#00ABB3;border:0;border-radius:.3rem;padding:.5rem 1rem}.btn[_ngcontent-%COMP%]:disabled{background:#6a717e}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{background:#4a8d77}.btn-delete[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{background:#dd8582}.board__list_drop[_ngcontent-%COMP%]{border-width:.2rem}.drop-zone[_ngcontent-%COMP%]{height:.5rem;border-radius:.3rem;width:100%;background:#6a717e;font-size:3rem;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .3s ease}.drop-zone-active[_ngcontent-%COMP%]{height:10rem;background:#00ABB3;opacity:.8}.board__list[_ngcontent-%COMP%]{width:20rem;padding:1rem .5rem;border:.1rem dashed #3C4048;border-radius:.3rem;display:flex;flex-direction:column;gap:.5rem}.board__list-items[_ngcontent-%COMP%]{height:64rem;overflow-y:auto;overflow-x:hidden}.board__list-title[_ngcontent-%COMP%]{font-size:2rem;color:#b2b2b2;text-align:center;background:#3C4048;padding:.5rem;border-radius:.3rem;margin-bottom:1rem}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#6a717e;border-radius:.3rem}.form-control[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})();function kt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.edit())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.i18n.edit)}}function wt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().ngIf,a=t.MAs(2),l=t.MAs(5),m=t.oxw();return t.KtG(m.save(o.id,a.innerText,l.innerText))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.i18n.save)}}function Pt(n,r){1&n&&t._UZ(0,"app-board-list",17),2&n&&t.Q6J("list",r.$implicit)}const It=function(){return["../../dashboard"]};function At(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"h2",2,3),t._uU(3),t.qZA(),t.TgZ(4,"h3",2,4),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,kt,2,1,"button",6),t.YNc(9,wt,2,1,"button",7),t.TgZ(10,"button",8),t._uU(11),t.qZA()(),t.TgZ(12,"form",9),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.create())}),t.TgZ(13,"label",10),t._uU(14),t.qZA(),t._UZ(15,"input",11),t.TgZ(16,"button",12),t._uU(17),t.qZA()(),t.TgZ(18,"div",13),t.YNc(19,Pt,1,1,"app-board-list",14),t.ALo(20,"async"),t.qZA()()}if(2&n){const e=r.ngIf,i=t.oxw();t.xp6(1),t.Q6J("contentEditable",i.boardEditable),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("contentEditable",i.boardEditable),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Q6J("ngIf",!i.boardEditable),t.xp6(1),t.Q6J("ngIf",i.boardEditable),t.xp6(1),t.Q6J("routerLink",t.DdM(16,It)),t.xp6(1),t.Oqu(i.i18n.board_back),t.xp6(1),t.Q6J("formGroup",i.BoardForm),t.xp6(2),t.Oqu(i.i18n.board_new),t.xp6(1),t.s9C("placeholder",i.i18n.board_new),t.xp6(1),t.Q6J("disabled",i.BoardForm.invalid),t.xp6(1),t.Oqu(i.i18n.create),t.xp6(2),t.Q6J("ngForOf",t.lcZ(20,14,i.lists$))}}let qt=(()=>{class n{constructor(e,i,o,a,l){this.fb=e,this.boardService=i,this.listService=o,this.activeRoute=a,this.translate=l,this.boardEditable=!1,this.dic=["board_back","board_new","title","description","create","open","close","edit","save","delete","required"],this.i18n=this.translate.get(this.dic)}ngOnInit(){this._createForm(),this.board$=this.activeRoute.params.pipe((0,u.w)(e=>this.boardService.getById(e.id))),this.activeRoute.params.subscribe(e=>{this.boardId=e.id}),this.listService.getAll(this.boardId).subscribe(),this.lists$=this.listService.listStream,this.translate.locale.subscribe(e=>{this.i18n=this.translate.get(this.dic,e)})}_createForm(){this.BoardForm=this.fb.group({title:[null,[s.kI.required]]})}create(){this.BoardForm.invalid||(this.listService.create(this.boardId,{title:this.BoardForm.value.title}).pipe((0,u.w)(()=>this.listService.getAll(this.boardId))).subscribe(),this.BoardForm.reset())}edit(){this.boardEditable=!0}save(e,i,o){const a={id:e,title:i,description:o};this.boardEditable=!1,this.boardService.edit(a).pipe((0,u.w)(()=>this.boardService.getList())).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(x),t.Y36(v),t.Y36(p.gz),t.Y36(g.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-board-page"]],decls:2,vars:3,consts:[["class","board",4,"ngIf"],[1,"board"],[3,"contentEditable"],["title",""],["description",""],[1,"buttons"],["class","btn btn-edit",3,"click",4,"ngIf"],["class","btn btn-save",3,"click",4,"ngIf"],[1,"btn",3,"routerLink"],[3,"formGroup","ngSubmit"],["for","board__list"],["type","text","id","board__list","formControlName","title",3,"placeholder"],["type","submit",1,"btn","btn-create",3,"disabled"],[1,"lists"],[3,"list",4,"ngFor","ngForOf"],[1,"btn","btn-edit",3,"click"],[1,"btn","btn-save",3,"click"],[3,"list"]],template:function(e,i){1&e&&(t.YNc(0,At,21,17,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.board$))},dependencies:[c.sg,c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,p.rH,Zt,c.Ov],styles:[".board[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}form[_ngcontent-%COMP%]{margin:auto;width:30rem;display:flex;flex-direction:column;align-items:center}.lists[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:1rem;margin:1rem}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem}"]}),n})();var k=_(1643);const Ot={provide:b.TP,multi:!0,useClass:(()=>{class n{constructor(e,i){this.auth=e,this.router=i}intercept(e,i){if(this.auth.authenticated){const o=`Bearer ${localStorage.getItem("token")}`,a=localStorage.getItem("exp");Date.now()>Number(a)&&(this.auth.logout(),this.router.navigate(["/user","login"])),e=e.clone({setHeaders:{Authorization:o}})}return i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(T.e),t.LFG(p.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})()};var Ft=_(6856);function Nt(n,r){if(1&n&&(t.TgZ(0,"div")(1,"h4"),t._uU(2),t.qZA(),t.TgZ(3,"h4"),t._uU(4),t.qZA()()),2&n){const e=t.oxw().ngIf,i=t.oxw();t.xp6(2),t.AsE("",i.i18n.name,": ",e.name,""),t.xp6(2),t.AsE("",i.i18n.email,": ",e.login,"")}}function yt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editProfile())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.i18n.edit)}}function Ut(n,r){if(1&n&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",e.i18n.name,"",e.i18n.required," ")}}function Jt(n,r){if(1&n&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",e.i18n.name," ",e.i18n.short," ")}}function St(n,r){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,Ut,2,2,"small",18),t.YNc(2,Jt,2,2,"small",18),t.qZA()),2&n){const e=t.oxw(3);let i,o;t.xp6(1),t.Q6J("ngIf",null==(i=e.profileForm.get("profileName"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.profileForm.get("profileName"))||null==o.errors?null:o.errors.minlength)}}function Et(n,r){if(1&n&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",e.i18n.email," ",e.i18n.required," ")}}function Lt(n,r){if(1&n&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.i18n.correct_email," ")}}function Yt(n,r){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,Et,2,2,"small",18),t.YNc(2,Lt,2,1,"small",18),t.qZA()),2&n){const e=t.oxw(3);let i,o;t.xp6(1),t.Q6J("ngIf",null==(i=e.profileForm.get("profileEmail"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.profileForm.get("profileEmail"))||null==o.errors?null:o.errors.email)}}function Bt(n,r){if(1&n&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",e.i18n.password," ",e.i18n.required," ")}}function Qt(n,r){if(1&n&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.i18n.correct_password," ")}}function $t(n,r){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,Bt,2,2,"small",18),t.YNc(2,Qt,2,1,"small",18),t.qZA()),2&n){const e=t.oxw(3);let i,o;t.xp6(1),t.Q6J("ngIf",null==(i=e.profileForm.get("profilePassword1"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.profileForm.get("profilePassword1"))||null==o.errors?null:o.errors.minlength)}}function jt(n,r){if(1&n&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",e.i18n.password," ",e.i18n.required," ")}}function zt(n,r){if(1&n&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.i18n.correct_password," ")}}function Gt(n,r){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,jt,2,2,"small",18),t.YNc(2,zt,2,1,"small",18),t.qZA()),2&n){const e=t.oxw(3);let i,o;t.xp6(1),t.Q6J("ngIf",null==(i=e.profileForm.get("profilePassword2"))||null==i.errors?null:i.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.profileForm.get("profilePassword2"))||null==o.errors?null:o.errors.minlength)}}function Dt(n,r){if(1&n&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.i18n.mismatch_passwords," ")}}function Ht(n,r){if(1&n&&(t.TgZ(0,"small",20),t._uU(1),t.qZA()),2&n){const e=r.ngIf;t.xp6(1),t.Oqu(e)}}function Kt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",6),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.saveProfile())}),t.TgZ(2,"div",7)(3,"label",8),t._uU(4),t.qZA(),t._UZ(5,"input",9),t.YNc(6,St,3,2,"div",10),t.qZA(),t.TgZ(7,"div",7)(8,"label",11),t._uU(9),t.qZA(),t._UZ(10,"input",12),t.YNc(11,Yt,3,2,"div",10),t.qZA(),t.TgZ(12,"div",7)(13,"label",13),t._uU(14),t.qZA(),t._UZ(15,"input",14),t.YNc(16,$t,3,2,"div",10),t.qZA(),t.TgZ(17,"div",7)(18,"label",15),t._uU(19),t.qZA(),t.TgZ(20,"input",16),t.NdJ("change",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.passwordValidator())})("blur",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.passwordValidator())}),t.qZA(),t.YNc(21,Gt,3,2,"div",10),t.qZA(),t.TgZ(22,"div",17),t.YNc(23,Dt,2,1,"small",18),t.qZA(),t.TgZ(24,"button",19),t._uU(25),t.qZA(),t.TgZ(26,"div",7),t.YNc(27,Ht,2,1,"small",18),t.ALo(28,"async"),t.qZA()()()}if(2&n){const e=t.oxw(2);let i,o,a,l;t.xp6(1),t.Q6J("formGroup",e.profileForm),t.xp6(3),t.hij(" ",e.i18n.name," "),t.xp6(1),t.s9C("placeholder",e.i18n.name),t.xp6(1),t.Q6J("ngIf",(null==(i=e.profileForm.get("profileName"))?null:i.touched)&&(null==(i=e.profileForm.get("profileName"))?null:i.invalid)),t.xp6(3),t.hij(" ",e.i18n.email," "),t.xp6(1),t.s9C("placeholder",e.i18n.email),t.xp6(1),t.Q6J("ngIf",(null==(o=e.profileForm.get("profileEmail"))?null:o.touched)&&(null==(o=e.profileForm.get("profileEmail"))?null:o.invalid)),t.xp6(3),t.hij(" ",e.i18n.password," "),t.xp6(1),t.s9C("placeholder",e.i18n.password),t.xp6(1),t.Q6J("ngIf",(null==(a=e.profileForm.get("profilePassword1"))?null:a.touched)&&(null==(a=e.profileForm.get("profilePassword1"))?null:a.invalid)),t.xp6(3),t.AsE(" ",e.i18n.password," ",e.i18n.repeat," "),t.xp6(1),t.hYB("placeholder","",e.i18n.password,"  ",e.i18n.repeat,""),t.xp6(1),t.Q6J("ngIf",(null==(l=e.profileForm.get("profilePassword2"))?null:l.touched)&&(null==(l=e.profileForm.get("profilePassword2"))?null:l.invalid)),t.xp6(2),t.Q6J("ngIf",!e.passwordValidator()),t.xp6(1),t.Q6J("disabled",!e.passwordValidator()&&e.profileForm.valid),t.xp6(1),t.hij("",e.i18n.save," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(28,19,e.auth.authErrorMessage$))}}function Vt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"h2"),t._uU(2),t.qZA(),t.YNc(3,Nt,5,4,"div",2),t.YNc(4,yt,2,1,"button",3),t.YNc(5,Kt,29,21,"div",2),t.TgZ(6,"button",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deletePrompt())}),t._uU(7),t.qZA(),t._UZ(8,"app-modal"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.i18n.profile),t.xp6(1),t.Q6J("ngIf",!e.profileEditable),t.xp6(1),t.Q6J("ngIf",!e.profileEditable),t.xp6(1),t.Q6J("ngIf",e.profileEditable),t.xp6(2),t.Oqu(e.i18n.delete)}}let Rt=(()=>{class n{constructor(e,i,o,a,l,m){this.auth=e,this.userService=i,this.translate=o,this.fb=a,this.router=l,this.modal=m,this.userId=localStorage.getItem("userId"),this.profileEditable=!1,this.dic=["profile","name","short","email","required","correct_email","password","correct_password","mismatch_passwords","edit","save","close","delete","cancel","repeat","modal_saved","modal_delete"],this.i18n=this.translate.get(this.dic),this.deleteProfile=()=>{this.userService.delete(this.userId).subscribe(),this.auth.logout(),this.router.navigate(["/user","login"])}}ngOnInit(){this.user$=this.userService.getUserById(this.userId),this.translate.locale.subscribe(e=>{this.i18n=this.translate.get(this.dic,e)}),this._createProfileForm()}_createProfileForm(){this.user$.subscribe(e=>{this.profileForm=this.fb.group({profileName:[e.name,[s.kI.required,s.kI.minLength(2)]],profileEmail:[e.login,[s.kI.required,s.kI.email]],profilePassword1:[null,[s.kI.required,s.kI.minLength(6)]],profilePassword2:[null,[s.kI.required]]})})}editProfile(){this.profileEditable=!0}saveProfile(){this.profileForm.invalid||(this.modal.info(this.i18n.modal_saved),this.userService.edit(this.userId,{name:this.profileForm.value.profileName,login:this.profileForm.value.profileEmail,password:this.profileForm.value.profilePassword1}).pipe((0,u.w)(()=>this.user$=this.userService.getUserById(this.userId))).subscribe(()=>{this.profileEditable=!1,this.modal.close()}))}passwordValidator(){const e=this.profileForm.get("profilePassword1")?.value,i=this.profileForm.get("profilePassword2")?.value;return e===i}deletePrompt(){this.modal.prompt(this.i18n.modal_delete,this.deleteProfile)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T.e),t.Y36(h),t.Y36(g.s),t.Y36(s.qu),t.Y36(p.F0),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile"]],decls:2,vars:3,consts:[["class","profile",4,"ngIf"],[1,"profile"],[4,"ngIf"],["class","btn btn-edit",3,"click",4,"ngIf"],[1,"btn","btn-delete",3,"click"],[1,"btn","btn-edit",3,"click"],[3,"formGroup","ngSubmit"],[1,"form-control"],["for","profile__name"],["type","text","id","profile__name","formControlName","profileName",3,"placeholder"],["class","validation",4,"ngIf"],["for","profile__email"],["type","email","id","profile__email","formControlName","profileEmail",3,"placeholder"],["for","profile__password1"],["type","password","id","profile__password1","formControlName","profilePassword1",3,"placeholder"],["for","profile__password2"],["type","password","id","profile__password2","formControlName","profilePassword2",3,"placeholder","change","blur"],[1,"validation"],["class","danger",4,"ngIf"],["type","save",1,"btn",3,"disabled"],[1,"danger"]],template:function(e,i){1&e&&(t.YNc(0,Vt,9,5,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.user$))},dependencies:[c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,C,c.Ov],styles:[".profile[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{margin:auto;width:30rem;display:flex;flex-direction:column;align-items:center}.form-control[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;margin:1rem 0}"]}),n})(),Xt=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[x,Ot,v,Z,h],imports:[c.ez,s.UX,q.m,s.u5,p.Bz.forChild([{path:"",component:Ft.w,children:[{path:"",redirectTo:"/user/login",pathMatch:"full"},{path:"login",component:lt},{path:"profile",component:Rt,canActivate:[k.a]},{path:"dashboard",component:Y,canActivate:[k.a]},{path:"board/:id",component:qt,canActivate:[k.a]}]}]),p.Bz]}),n})()}}]);